webpackJsonp([2],{557:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o.d(t,"WallPageModule",function(){return l});var n=o(0),i=o(16),s=o(591),r=o(559),a=(o.n(r),o(560)),c=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},l=function(){function e(){}return e=c([Object(n.NgModule)({declarations:[s.a],imports:[i.n.forChild(s.a)],providers:[r.Clipboard,a.a]})],e)}()},559:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.init=function(){window.addEventListener("copy",function(t){e._data&&(t.clipboardData.setData("text/plain",e._data),t.preventDefault(),e._data=null)})},e._data=null,e.POS=!!window.clipboardData,e.copy=function(t){e._data=t,e.POS?window.clipboardData&&(window.clipboardData.setData("Text",e._data),e._data=null):document.execCommand("copy")},e}();t.Clipboard=n,n.init()},560:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var n=o(0),i=o(53),s=(o(18),this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}()),r=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.show=function(e,t,o){return Object(i.cordova)(this,"show",{observable:!0,clearFunction:"hide"},arguments)},t.prototype.hide=function(){return Object(i.cordova)(this,"hide",{},arguments)},t.prototype.showWithOptions=function(e){return Object(i.cordova)(this,"showWithOptions",{observable:!0,clearFunction:"hide"},arguments)},t.prototype.showShortTop=function(e){return Object(i.cordova)(this,"showShortTop",{observable:!0,clearFunction:"hide"},arguments)},t.prototype.showShortCenter=function(e){return Object(i.cordova)(this,"showShortCenter",{observable:!0,clearFunction:"hide"},arguments)},t.prototype.showShortBottom=function(e){return Object(i.cordova)(this,"showShortBottom",{observable:!0,clearFunction:"hide"},arguments)},t.prototype.showLongTop=function(e){return Object(i.cordova)(this,"showLongTop",{observable:!0,clearFunction:"hide"},arguments)},t.prototype.showLongCenter=function(e){return Object(i.cordova)(this,"showLongCenter",{observable:!0,clearFunction:"hide"},arguments)},t.prototype.showLongBottom=function(e){return Object(i.cordova)(this,"showLongBottom",{observable:!0,clearFunction:"hide"},arguments)},t.pluginName="Toast",t.plugin="cordova-plugin-x-toast",t.pluginRef="plugins.toast",t.repo="https://github.com/EddyVerbruggen/Toast-PhoneGap-Plugin",t.platforms=["Android","BlackBerry 10","iOS","Windows","Windows Phone 8"],t=r([Object(n.Injectable)({providedIn:"root"})],t)}(i.c)},591:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var n=o(0),i=o(16),s=o(163),r=o(90),a=o(304),c=o(559),l=(o.n(c),this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r}),u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o,n,i,s,r,a,c,l,u,d){this.navCtrl=e,this.toastController=t,this.clipboard=o,this.alrtctrl=n,this.platform=i,this.socialSharing=s,this.firebasedb=r,this.navParams=a,this.app=c,this.modalCtrl=l,this.loadingCtrl=u,this.firebaseService=d,this.users=[],this.filteredUsers=[],this.heart=!0,this.taggedItem=!1,this.show=!1,this.finishedLoading=!1,this.limit=50}return e.prototype.ionViewDidLoad=function(){var e=this;this.firebaseService.getPostLastId().snapshotChanges().subscribe(function(t){t.forEach(function(t){e.lastId=t.key})}),console.log("ionViewDidLoad WallPage"),this.active=!0,this.postComments=this.firebaseService.getComments();this.postComments.snapshotChanges().subscribe(function(t){e.arrayComments=[],t.forEach(function(t){var o=t.payload.toJSON();o.$key=t.key,e.arrayComments.push(o)})});this.firebaseService.getLikePost().snapshotChanges().subscribe(function(t){e.arrayLikePosts=[],t.forEach(function(t){var o=t.payload.toJSON();o.$key=t.key,e.liked=o,e.arrayLikePosts.push(o)})}),this.posts=this.firebaseService.getPost(this.limit);this.posts.snapshotChanges().subscribe(function(t){e.arrayItems=[],t.forEach(function(t){var o=t.payload.toJSON();o.$key=t.key,e.arrayItems.push(o)}),e.currentDate=(new Date).getTime()/1e3,e.arrayItems.map(function(t){e.arrayPosts=[],e.currentDate-t.time<59?(e.seconds=!0,t.time=Math.round(e.currentDate-t.time)+"s"):e.currentDate-t.time>59&&e.currentDate-t.time<3599?(e.minutes=!0,t.time=Math.round((e.currentDate-t.time)/60)+"m"):e.currentDate-t.time>3599&&(e.hours=!0,t.time=Math.round((e.currentDate-t.time)/3600)+"h");e.firebaseService.getUsers(t.userid).snapshotChanges().subscribe(function(o){if(console.log(o.payload.toJSON()),null!=o.payload.toJSON()){var n=o.payload.toJSON();n.$key=o.key,e.userObjects=n,console.log(e.userObjects),e.objPost={username:e.userObjects.username,image:e.userObjects.image,userid:t.userid,$key:t.$key,comments:t.comments,content:t.content,hearts:t.hearts,time:t.time,status:"",color:!1,taggedText:""};var i=e.objPost.content.indexOf("#");if(e.objPost.content.indexOf("#")>-1){e.taggedItem=!0;var s=e.objPost.content.indexOf(" ",i);e.taggedText=e.objPost.content.substring(i,s),e.objPost.taggedText=e.taggedText}e.arrayPosts.push(e.objPost),e.filteredUsers=e.arrayPosts,e.filteredUsers=e.filteredUsers.reverse(),e.userId=e.firebaseService.userKey,console.log(e.filteredUsers),e.filteredUsers.forEach(function(t){e.lastId===t.$key&&(e.finishedLoading=!0),e.filteredArrayComments=e.arrayComments.filter(function(e){return e.postid==t.$key}),e.commentLength=e.filteredArrayComments.length,t.comments=e.commentLength}),e.boundClass={heart:e.heart},e.objPost.color="not active";for(var r=0;r<e.arrayLikePosts.length;r++)e.arrayLikePosts[r].postid===e.objPost.$key?e.arrayLikePosts[r].userid===e.firebaseService.userKey&&(e.objPost.color="active"):console.log("no")}})})})},e.prototype.ionViewDidEnter=function(){},e.prototype.newPosts=function(){this.navCtrl.push("WallPage");var e=this.loadingCtrl.create({content:"Please wait..."});e.present(),setTimeout(function(){e.dismiss()},800)},e.prototype.likePost=function(e){console.log(e);var t;if(t={userid:this.firebaseService.userKey,postid:e.$key,status:!0},"active"!=e.color)if(this.firebaseService.likePost(t),this.active=!0,t.postid===e.$key){if(t.userid===this.firebaseService.userKey){e.color="active",e.hearts+=1,this.firebaseService.usersObject.points+=1,this.firebaseService.updateUser2(this.firebaseService.usersObject),this.firebaseService.updatePost(e);var o={postid:e.$key,postuserid:e.userid,status:!0,action:"md-heart",color:"active",time:(new Date).getTime()/1e3,commentid:"",userid:this.firebaseService.userKey,image:this.firebaseService.userImage,username:this.firebaseService.userName,comment:"",message:"liked your post",post:e.content};this.firebaseService.alertCustomId(o)}}else console.log("no");else e.color="not active",this.firebaseService.deleteLikePost((e.$key+this.firebaseService.userKey).toString()),this.firebaseService.deleteAlert(e.$key+this.firebaseService.userKey),e.hearts-=1,this.firebaseService.updatePost(e)},e.prototype.invite=function(){var e=this;if(this.platform.is("cordova"))this.socialSharing.share("Get Nessty health app from","Nessty Health app",null,"https://play.google.com/store/apps/details?id=com.nessty.nessty").then(function(){e.firebaseService.usersObject.points+=1,e.firebaseService.updateUser2(e.firebaseService.usersObject)}).catch(function(){});else{console.log("web share");this.alrtctrl.create({title:"Invite friends",inputs:[{name:"content",type:"text",value:"Get Nessty health app from https://play.google.com/store/apps/details?id=com.nessty.nessty"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){console.log("Canceled Click")}},{text:"Copy",handler:function(t){c.Clipboard.copy("Get Nessty health app from https://play.google.com/store/apps/details?id=com.nessty.nessty");e.toastController.create({message:"Copied to Clipboard",duration:2e3}).present()}}]}).present()}},e.prototype.signOut=function(){console.log("Logged Out"),this.firebaseService.logout(),this.app.getRootNav().push("LoginFlatPage"),localStorage.removeItem("userId")},e.prototype.sharePost=function(e){var t=this;if(console.log(e),this.platform.is("cordova"))this.socialSharing.share("Get Nessty health app from","https://play.google.com/store/apps/details?id=com.nessty.nessty",null,e.content).then(function(){t.firebaseService.usersObject.points+=1,t.firebaseService.updateUser2(t.firebaseService.usersObject)}).catch(function(){});else{console.log("web share");this.alrtctrl.create({title:"Copy link to share",inputs:[{name:"content",type:"text",value:e.content}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){console.log("Canceled Click")}},{text:"Copy",handler:function(o){c.Clipboard.copy(e.content);t.toastController.create({message:"Copied to Clipboard",duration:2e3}).present()}}]}).present()}},e.prototype.navPost=function(){var e=this.modalCtrl.create("PostPage");e.onDidDismiss(function(e){e&&console.log(e)}),e.present()},e.prototype.reload=function(){var e=this.loadingCtrl.create({content:"Please wait..."});e.present(),setTimeout(function(){e.dismiss()},800)},e.prototype.getPost=function(e){console.log(e);var t=this.loadingCtrl.create({content:"Please wait..."});t.present(),setTimeout(function(){t.dismiss()},800);var o=this.modalCtrl.create("ViewpostPage",{user:e});o.onDidDismiss(function(e){e&&console.log(e)}),o.present()},e.prototype.filterUsers=function(e){var t=e.target.value?e.target.value.toLowerCase():"";this.filteredUsers=[];for(var o=0,n=this.arrayPosts;o<n.length;o++){var i=n[o];-1!==i.username.toLowerCase().indexOf(t)?this.filteredUsers.push(i):-1!==i.content.toLowerCase().indexOf(t)&&this.filteredUsers.push(i)}},e.prototype.deletePost=function(e){var t=this,o=this.loadingCtrl.create({content:"Please wait..."});o.present().then(function(o){t.firebaseService.deletePost(e.$key),t.deleteCommentArray=[],t.firebaseService.getComments().snapshotChanges().subscribe(function(o){o.forEach(function(e){var o=e.payload.toJSON();o.key=e.key,t.deleteCommentArray.push(o)}),t.deleteCommentArray=t.deleteCommentArray.filter(function(t){return t.postid==e.$key}),t.deleteCommentArray.map(function(e){t.firebaseService.deleteComment(e.key)})})}),o.dismiss()},e.prototype.loadMore=function(e){var t=this;this.limit+=50,setTimeout(function(){t.ionViewDidLoad(),console.log("Async operation has ended"),e.complete()},1e3)},e=l([Object(n.Component)({selector:"page-wall",template:'\x3c!--\n  Generated template for the WallPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <ion-navbar color="dark">\n    <ion-buttons start>\n      <button (click)="signOut()" ion-button icon-only>\n        LOGOUT\n        <ion-icon class="icon-chat" name="ios-exit"></ion-icon>\n      </button>\n    </ion-buttons>\n\n    <div class="btn-align2">\n      <button style="text-transform: none;" class="btn-invite" small (click)="invite()" ion-button>\n        <ion-icon class="icon-chat2" name="md-person-add"></ion-icon>\n        <span>Invite</span>\n      </button>\n    </div>\n\n\n    <ion-title class="title">Wall</ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content class="background-image" no-padding (swipe)="reload()">\n  <ion-toolbar color="secondary">\n    <ion-searchbar placeholder="Enter tag, topic or name" (ionInput)="filterUsers($event)"></ion-searchbar>\n  </ion-toolbar>\n  <div class="bg-color bg-size">\n    <ion-row>\n      <ion-col align-self-end>\n        <button class="btn-align" ion-button small color="secondary" (click)="newPosts()">\n          New Posts\n        </button>\n      </ion-col>\n    </ion-row>\n    <ion-card *ngFor="let user of filteredUsers, index as i" no-padding>\n      <ion-row (click)="getPost(user)">\n        \x3c!-- <ion-col col-1> --\x3e\n        <ion-item>\n          <ion-avatar item-left>\n            <img *ngIf="user.image!=\'\'" [src]="user.image" [alt]="user.username" class="avatar" />\n            <img *ngIf="user.image==\'\'" [alt]="user.username" src="assets/images/blue-bird-with-green.png" class="avatar" width="60"\n              height="60">\n          </ion-avatar>\n        </ion-item>\n        \x3c!-- </ion-col> --\x3e\n        <ion-col align-self-start>\n          <ion-card-header>\n            <span class="user-name"> {{user.username}} </span> <span class="time"> -{{user.time}}</span>\n          </ion-card-header>\n          <ion-card-content class="posts">\n            {{user.content}} <span class="tag-color">{{user.taggedText}}</span>\n          </ion-card-content>\n        </ion-col>\n      </ion-row>\n      <ion-row>\n        <ion-col>\n          <button ion-button icon-left clear small color="light" (click)="likePost(user)">\n            <ion-icon name="md-heart" [ngClass]="{\'heart\':user.color===\'active\'}" class="icon-color"></ion-icon>\n            <div class="icon-num">{{user.hearts}}</div>\n          </button>\n        </ion-col>\n        <ion-col>\n          <button ion-button icon-left clear small color="light" (click)="getPost(user)">\n            <ion-icon name="md-chatbubbles" class="icon-color"></ion-icon>\n            <div class="icon-num">{{user.comments}}</div>\n          </button>\n        </ion-col>\n        <ion-col>\n          <button ion-button (click)="sharePost(user)" icon-left clear small color="light">\n                    <ion-icon name="md-share-alt" class="icon-color"></ion-icon>\n                    <div class="icon-num">{{user.repost}}</div>\n                 </button>\n        </ion-col>\n        <ion-col center text-center>\n          <button *ngIf="user.userid == userId" ion-button icon-left clear small color="light" (click)="deletePost(user)">\n            <ion-icon name="md-trash" class="icon-color"></ion-icon>\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-card>\n    <ion-infinite-scroll *ngIf="!finishedLoading" (ionInfinite)="loadMore($event)">\n      <ion-infinite-scroll-content></ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n\n  </div>\n  <ion-fab bottom right>\n    <button ion-fab color="secondary" (click)="navPost()"> <ion-icon name="md-create"> </ion-icon> </button>\n  </ion-fab>\n</ion-content>'}),u("design:paramtypes",[i.q,i.v,c.Clipboard,i.b,i.t,a.a,s.a,i.r,i.d,i.p,i.o,r.a])],e)}()}});