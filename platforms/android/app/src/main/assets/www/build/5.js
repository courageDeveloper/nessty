webpackJsonp([5],{536:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.d(e,"AlertsPageModule",function(){return l});var n=o(0),i=o(16),r=o(564),s=o(559),a=(o.n(s),o(560)),c=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},l=function(){function t(){}return t=c([Object(n.NgModule)({declarations:[r.a],imports:[i.n.forChild(r.a)],providers:[s.Clipboard,a.a]})],t)}()},559:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.init=function(){window.addEventListener("copy",function(e){t._data&&(e.clipboardData.setData("text/plain",t._data),e.preventDefault(),t._data=null)})},t._data=null,t.POS=!!window.clipboardData,t.copy=function(e){t._data=e,t.POS?window.clipboardData&&(window.clipboardData.setData("Text",t._data),t._data=null):document.execCommand("copy")},t}();e.Clipboard=n,n.init()},560:function(t,e,o){"use strict";o.d(e,"a",function(){return a});var n=o(0),i=o(53),r=(o(18),this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}()),s=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.show=function(t,e,o){return Object(i.cordova)(this,"show",{observable:!0,clearFunction:"hide"},arguments)},e.prototype.hide=function(){return Object(i.cordova)(this,"hide",{},arguments)},e.prototype.showWithOptions=function(t){return Object(i.cordova)(this,"showWithOptions",{observable:!0,clearFunction:"hide"},arguments)},e.prototype.showShortTop=function(t){return Object(i.cordova)(this,"showShortTop",{observable:!0,clearFunction:"hide"},arguments)},e.prototype.showShortCenter=function(t){return Object(i.cordova)(this,"showShortCenter",{observable:!0,clearFunction:"hide"},arguments)},e.prototype.showShortBottom=function(t){return Object(i.cordova)(this,"showShortBottom",{observable:!0,clearFunction:"hide"},arguments)},e.prototype.showLongTop=function(t){return Object(i.cordova)(this,"showLongTop",{observable:!0,clearFunction:"hide"},arguments)},e.prototype.showLongCenter=function(t){return Object(i.cordova)(this,"showLongCenter",{observable:!0,clearFunction:"hide"},arguments)},e.prototype.showLongBottom=function(t){return Object(i.cordova)(this,"showLongBottom",{observable:!0,clearFunction:"hide"},arguments)},e.pluginName="Toast",e.plugin="cordova-plugin-x-toast",e.pluginRef="plugins.toast",e.repo="https://github.com/EddyVerbruggen/Toast-PhoneGap-Plugin",e.platforms=["Android","BlackBerry 10","iOS","Windows","Windows Phone 8"],e=s([Object(n.Injectable)({providedIn:"root"})],e)}(i.c)},564:function(t,e,o){"use strict";o.d(e,"a",function(){return p});var n=o(0),i=o(16),r=o(90),s=o(304),a=o(559),c=(o.n(a),this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s}),l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,o,n,i,r,s,a,c,l){this.navCtrl=t,this.toastController=e,this.clipboard=o,this.alrtctrl=n,this.platform=i,this.socialSharing=r,this.navParams=s,this.firebaseService=a,this.modalCtrl=c,this.loadingCtrl=l,this.notifications=[],this.finishedLoading=!1,this.limit=50,this.filteredNotifications=[]}return t.prototype.ionViewDidLoad=function(){},t.prototype.ionViewDidEnter=function(){var t=this;return this.firebaseService.getAlerts().snapshotChanges().subscribe(function(e){t.arrayAlertsItems=[],e.forEach(function(e){var o=e.payload.toJSON();o.$key=e.key,t.arrayAlertsItems.push(o)}),t.arrayAlertsItems.forEach(function(e){console.log(e.$key),e.status=!1,t.firebaseService.updateAlert(e)})}),this.firebaseService.getAlertLastId().snapshotChanges().subscribe(function(e){e.forEach(function(e){t.lastId=e.key})}),this.loadAlerts()},t.prototype.loadAlerts=function(){var t=this;this.active=!0,this.activecomment=!0,this.activeshare=!0,this.currentDate=(new Date).getTime()/1e3,this.alertsArray=[],this.firebaseService.getAlert(this.limit).snapshotChanges().subscribe(function(e){e.forEach(function(e){var o=e.payload.toJSON();o.$key=e.key,t.currentDate-o.time<59?(t.seconds=!0,o.time=Math.round(t.currentDate-o.time)+"s"):t.currentDate-o.time>59&&t.currentDate-o.time<3599?(t.minutes=!0,o.time=Math.round((t.currentDate-o.time)/60)+"m"):t.currentDate-o.time>3599&&(t.hours=!0,o.time=Math.round((t.currentDate-o.time)/3600)+"h"),t.alertsArray.push(o)}),t.filteredNotifications=t.alertsArray,t.filteredNotifications=t.filteredNotifications.reverse(),t.filteredNotifications=t.filteredNotifications.filter(function(e){return e.postuserid==t.firebaseService.userKey}),t.filteredNotifications.forEach(function(e){t.lastId===e.$key&&(t.finishedLoading=!0)})}),this.boundClass={heart:this.heart,comment:this.comment,share:this.share}},t.prototype.deleteAlert=function(t){var e=this,o=this.loadingCtrl.create({content:"Please wait..."});o.present().then(function(o){e.firebaseService.deleteAlert(t.$key)}),o.dismiss(),this.navCtrl.push("AlertsPage"),this.navCtrl.pop()},t.prototype.navPost=function(){var t=this.modalCtrl.create("PostPage");t.onDidDismiss(function(t){t&&console.log(t)}),t.present()},t.prototype.reload=function(){var t=this.loadingCtrl.create({content:"Please wait..."});t.present(),setTimeout(function(){t.dismiss()},800)},t.prototype.invite=function(){var t=this;if(this.platform.is("cordova"))this.socialSharing.share("Get Nessty health app from","Nessty Health app",null,"https://play.google.com/store/apps/details?id=com.nessty.nessty").then(function(){t.firebaseService.usersObject.points+=1,t.firebaseService.updateUser2(t.firebaseService.usersObject)}).catch(function(){});else{console.log("web share");this.alrtctrl.create({title:"Invite friends",inputs:[{name:"content",type:"text",value:"Get Nessty health app from https://play.google.com/store/apps/details?id=com.nessty.nessty"}],buttons:[{text:"Cancel",role:"cancel",handler:function(t){console.log("Canceled Click")}},{text:"Copy",handler:function(e){a.Clipboard.copy("Get Nessty health app from https://play.google.com/store/apps/details?id=com.nessty.nessty");t.toastController.create({message:"Copied to Clipboard",duration:2e3}).present()}}]}).present()}},t.prototype.filterUsers=function(t){var e=t.target.value?t.target.value.toLowerCase():"";this.filteredNotifications=[];for(var o=0,n=this.notifications;o<n.length;o++){var i=n[o];-1!==i.username.toLowerCase().indexOf(e)?this.filteredNotifications.push(i):-1!==i.post.toLowerCase().indexOf(e)&&this.filteredNotifications.push(i)}},t.prototype.getAlert2=function(t){console.log(t),this.connectDb(t)},t.prototype.connectDb=function(t){var e=this;this.firebaseService.getSinglePost(t.postid).snapshotChanges().subscribe(function(o){var n=o.payload.toJSON();n.$key=o.key,e.posts=n,e.post={$key:e.posts.$key,comments:e.posts.comments,content:e.posts.content,hearts:e.posts.hearts,time:e.posts.time,userid:e.posts.userid},e.firebaseService.getLikePost().snapshotChanges().subscribe(function(t){e.arrayPostLike=[],t.forEach(function(t){var o=t.payload.toJSON();o.$key=t.key,e.arrayPostLike.push(o),e.arrayPostLike=e.arrayPostLike.filter(function(t){return t.postid===e.post.$key})}),console.log(e.arrayPostLike),e.arrayPostLike.forEach(function(t){t.userid==e.firebaseService.userKey&&(e.post={$key:e.posts.$key,comments:e.posts.comments,content:e.posts.content,color:"active",hearts:e.posts.hearts,time:e.posts.time,userid:e.posts.userid})})}),e.firebaseService.getUsers(e.posts.userid).snapshotChanges().subscribe(function(o){var n=o.payload.toJSON();n.$key=o.key,e.user=n;var i=e.modalCtrl.create("ViewalertPage",{notify:t,user:e.user,post:e.post});i.onDidDismiss(function(t){t&&console.log(t)}),i.present()})})},t.prototype.loadMore=function(t){var e=this;this.limit+=50,setTimeout(function(){e.ionViewDidLoad(),console.log("Async operation has ended"),t.complete()},1e3)},t=c([Object(n.Component)({selector:"page-alerts",template:'\x3c!--\n  Generated template for the AlertsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <ion-navbar>\n    <ion-buttons start>\n      <button (click)="navPost()" ion-button icon-only>\n        <ion-icon class="icon-chat" name="md-create"></ion-icon>\n      </button>\n    </ion-buttons>\n\n    <div class="btn-align">\n      <button style="text-transform: none;" class="btn-invite" small (click)="invite()" ion-button>\n        <ion-icon class="icon-chat2" name="md-person-add"></ion-icon>\n        <span>Invite</span>\n      </button>\n    </div>\n\n\n    <ion-title class="title">Notifications</ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n<ion-content class="background-image" no-padding (swipe)="reload()">\n  <ion-toolbar color="secondary">\n    <ion-searchbar placeholder="Enter tag, topic or name" (ionInput)="filterUsers($event)"></ion-searchbar>\n  </ion-toolbar>\n  <div class="bg-color bg-size">\n    <ion-card *ngFor="let notify of filteredNotifications" no-padding>\n      <ion-row>\n        \x3c!-- <ion-col col-1> --\x3e\n        <ion-item>\n          <ion-icon class="ion-icon" item-left [name]="notify.action" [ngClass]="{\'heart\':notify.color===\'active\', \'comment\':notify.color===\'activecomment\', \'share\': notify.color===\'activeshare\'}"></ion-icon>\n          <ion-avatar>\n            <img *ngIf="notify.image!=\'\'" [src]="notify.image" item-left [alt]="notify.username" class="avatar" />\n            <img *ngIf="notify.image==\'\'" [alt]="notify.username" src="assets/images/blue-bird-with-green.png" class="avatar" width="60"\n              height="60">\n          </ion-avatar>\n        </ion-item>\n        \x3c!-- </ion-col> --\x3e\n        <ion-col align-self-start>\n          <ion-card-header>\n            <span class="user-name"> {{notify.username}} </span> <span class="message-text">{{notify.message}}</span>\n            <span class="time"> -{{notify.time}} </span>\n          </ion-card-header>\n          <ion-card-content class="posts">\n            {{notify.post}}\n            <div class="align-btn">\n            <button ion-button icon-left clear small color="light" (click)="deleteAlert(notify)">\n                <ion-icon name="md-trash" class="icon-color"></ion-icon>\n              </button>\n              </div>\n          </ion-card-content>\n        </ion-col>\n      </ion-row>\n    </ion-card>\n <ion-infinite-scroll *ngIf="!finishedLoading" (ionInfinite)="loadMore($event)">\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll> \n</div>\n</ion-content>'}),l("design:paramtypes",[i.q,i.v,a.Clipboard,i.b,i.t,s.a,i.r,r.a,i.p,i.o])],t)}()}});